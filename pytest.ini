[pytest]
# Pytest 配置文件

# Asyncio mode for pytest-asyncio
asyncio_mode = auto

# 測試路徑
testpaths = app

# Python 文件模式
python_files = test_*.py

# 測試類模式
python_classes = Test*

# 測試函數模式
python_functions = test_*

# 添加選項
addopts = 
    -v
    --strict-markers
    --tb=short
    --disable-warnings
    --color=yes

# 標籤定義
markers =
    unit: 單元測試
    integration: 集成測試
    slow: 性能測試
    auth: 認證測試
    file: 檔案管理測試
    tag: 標籤系統測試
    batch: 批量操作測試
    search: 搜尋功能測試
    conclusion: 結論和標註測試
    health: 健康檢查測試

# 覆蓋率配置
[coverage:run]
source = app
omit = 
    */tests/*
    */test_*.py
    */__main__.py
    */conftest.py

[coverage:report]
exclude_lines =
    pragma: no cover
    def __repr__
    raise AssertionError
    raise NotImplementedError
    if __name__ == .__main__.:
    if TYPE_CHECKING:
    class .*\bProtocol\):
    @(abc\.)?abstractmethod
    @pytest.fixture
    @mock\.patch
    if __debug__:

precision = 2
skip_covered = False

# 最小覆蓋率
fail_under = 70

[coverage:html]
directory = test_results/htmlcov
